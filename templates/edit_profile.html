{% extends 'layout.html' %}
{% import 'macros.html' as m -%}
{% block nav %}
{{ m.display_nav(user,profile_image_path) }}
{% endblock %}
{% block title %}
Blog Lite - Edit Account
{% endblock %}

{% block body %}
<div class="col-md-10 mx-auto col-lg-5 p-4 p-md-5">
  {% with messages = get_flashed_messages() %}
  {{ m.flash_message(messages) }}
  {% endwith %}
  <h1>Edit Profile</h1>
  <br>
  <form method="POST" action="{{url_for('edit_profile',username=user)}}" enctype="multipart/form-data">
    <div class="form-floating mb-3">
      <input type="text" class="form-control" name="username" placeholder="username" autocomplete="off"
        value="{{profile.username}}" disabled required>
      <label for="floatingInput">username</label>
    </div>
    <div class="form-floating mb-3">
      <input type="text" class="form-control" name="first_name" placeholder="first name" autocomplete="off"
        value="{{profile.first_name}}" required>
      <label for="floatingInput">first name</label>
    </div>
    <div class="form-floating mb-3">
      <input type="text" class="form-control" name="last_name" placeholder="last name" autocomplete="off"
        value="{{profile.last_name}}" required>
      <label for="floatingInput">last name</label>
    </div>
    <div class="form-floating mb-3">
      <input type="email" class="form-control" name="email" placeholder="email" autocomplete="off"
        value="{{profile.email}}" required>
      <label for="floatingInput">email</label>
    </div>
    <div class="form-floating mb-3">
      <input type="password" class="form-control" name="password" placeholder="Password" autocomplete="off" required>
      <label for="floatingPassword">Password</label>
    </div>
    <div class="form-floating mb-3">
      <input type="password" class="form-control" name="confirm_password" placeholder="Confirm Password"
        autocomplete="off" required>
      <label for="floatingPassword">Confirm Password</label>
    </div>
    <div class="form-floating mb-3">
      <em>Current Profile Image</em>
    </div>
    <div class="form-floating mb-3">
      <img src="{{url_for('static',filename='profile_images/'~profile.username~'_'~profile.profile_image)}}"
        height="200px">
    </div>
    <div class="form-floating mb-3">
      <em>Choose Profile Image</em>
    </div>
    <div class="form-group">
      <input type="file" class="form-control" name="profile_image">
    </div>
    <br>
    <button class="w-100 btn btn-lg btn-primary" type="submit">Edit profile</button>
  </form>
</div>
{% endblock %}